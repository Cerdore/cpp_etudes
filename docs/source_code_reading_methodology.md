# 代码阅读方法学探讨

## 为什么阅读代码呢？

那篇Aurora的论文说：The log contains all the truth. 对系统学习而言, 同样 The source code contains all the truth.
即源码有全部真相.

## 阅读代码的心态

代码阅读者，往往热爱系统的内核技术, 不浅尝辄止于表观的基于观念的一般原理性认识, 而是想内窥系统核心的设计细节. 对于代码阅读者而言, 似是而非的“技术都是想通的”的说法，是站不住脚的. 不否认, 涉及存储相关的技术的单个技术领域, 每个人都可以搜集到广泛而全面的文献资料和业界案例, 整个设计空间都是可获取的, 但是相同设计路径下, 不同的设计实例, 依然有很强的辨识度， 这种辨识度来自于代码细节. 细节蕴含美感, 影响性能, 往往是一个系统多次迭代后才采用的正确的选择. 阅读代码是为了找到那些精湛(elaborated and sophisticated)的细节.

阅读是精神的内在需求, 根本动因是兴趣. 始于盲搜， 一场暂离琐事的短暂山林徒步, 到达山顶, 被清风抚慰, 俯视湖面的小有所成的惬意. 分享也是一种精神的内在需求, 把阅读获得的东西分享给他人, 需要重整自己的思维, 重整的再次加工可以让思维更加自洽, 分享时，同peer之间的思维碰撞，进一步可以激发思考, 产生新的，更高级的东西. 这种，不自洽到自洽,再次自洽到不自洽的反复的过程, 是一种美妙的精神体验. 同时, 分享, 也可以让别人产生共情, 能够遴选出真正的peer. 学习过程中，和高质量的peer切磋是最有利于精进的.

阅读块头较大的代码(10LevelDB当量以上), 充满了盲搜的童趣. 盲搜是一种在漫无目的的翻找, 是童年给我最美好的礼物. 小孩子翻箱倒柜找东西, 发现新奇的玩意，爱不释手. 鲁迅在《从百草堂到三味书屋》的散文记载了自己童年在荒园里找各种果实，昆虫和野菜. 山里小女孩小时候是采蘑菇的小姑娘，住在海边的小姑娘是赶海的小姑娘. 笔者记得自己小时候, 也有类似经历:
1. 在山里挖青蒿, 紫苑和柴胡等药材. 找野蒜, 野葱，奶瓜瓜(一种植物,学名未知), 牵牛花等可食用植物. 在一大片树林里找野蜂的蜂片.
2. 在荒地里, 翻开残砖破瓦寻找叫不出名字的昆虫, 捕捉螳螂和蚂蚱.
3. 山洪过好, 在河床中找铜, 可以找到残破的铜钱和箭头.

每个人的童年几乎都经历过类似的事情, 没有既定的目标, 只受兴致主导的, 走走停停的, 漫无目的翻找. 这就是童年给我们最好的馈赠. 后面这种馈赠变成了阅读和文献收集.

面对海量的信息, 深入研究所面临的细节爆炸. 